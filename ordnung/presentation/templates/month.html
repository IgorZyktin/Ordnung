{% extends "base.html" %}

{%- block add_to_head %}
    <link href="{{ url_for('static', path='month.css') }}" rel="stylesheet" type="text/css">
    <script src="{{ url_for('static', path='month.js') }}"></script>
{% endblock %}

{%- block content %}
<div class="global">

    <div class="month">

        {# Day labels here - Monday, Tuesday, etc. #}
        <div class="header">
            {%- for long_name, short_name in day_names %}
                <div class="labels">
                    <span class="wide">{{ long_name }}</span>
                    <span class="narrow">{{ short_name }}</span>
                </div>
            {% endfor -%}
        </div>

        {# Day contents here, five weeks of seven days #}
        {%- for week_index in range(5) -%}
            <div class="week">
                {%- for day_index in range(7) %}
                    {% set index = day_index + week_index * 7 %}
                    {% set day = month[index] %}

                    <div class="{{ day.css_class }}" date="{{ day.date }}">
                        <span class="day_label wide">
                            {{ day.number }} {{ translate(lang, "month_%s_"|format(day.month)) }}
                        </span>
                        <span class="day_label narrow">{{ day.number }}</span>
                    </div>

                {% endfor -%}
            </div>
        {%- endfor -%}

        {# Navigation buttons here #}
        <div class="footer">

            <div id="leap_back" onclick="relocate_with_args('{{ leap_back_url }}')">
                <span class="wide">{{ gettext(lang, 'Leap back') }}</span>
                <span class="narrow"><--</span>
            </div>

            <div id ="step_back" onclick="relocate_with_args('{{ step_back_url }}')">
                <span class="wide">{{ gettext(lang, 'Step back') }}</span>
                <span class="narrow"><</span>
            </div>

            <div id ="step_on_date" onclick="alert('not ready')">{#FIXME#}
                <span class="wide">{{ gettext(lang, 'Step on date') }}</span>
                <span class="narrow">>|<</span>
            </div>

            <div id="step_forward" onclick="relocate_with_args('{{ step_forward_url }}')">
                <span class="wide">{{ gettext(lang, 'Step forward') }}</span>
                <span class="narrow">></span>
            </div>

            <div id="leap_forward" onclick="relocate_with_args('{{ leap_forward_url }}')">
                <span class="wide">{{ gettext(lang, 'Leap forward') }}</span>
                <span class="narrow">--></span>

            </div>
        </div>

    </div>

    <div id="menu_toggle" class="menu_toggle">
    </div>

    <div id="menu" class="menu" style="display: {{ 'flex' if menu_is_visible else 'none' }}">
        {%- for section in tasks %}
            {% for task in section -%}
                <span class="task">{{ task }}</span>
            {% endfor -%}

            {%- if not loop.last -%}
                <hr>
            {%- endif -%}
        {%- endfor -%}
    </div>

</div>
{% endblock -%}